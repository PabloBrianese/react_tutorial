{"ast":null,"code":"import _classCallCheck from\"/mnt/c/Users/Pablo/Documents/GitHub/react_tutorial/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/Pablo/Documents/GitHub/react_tutorial/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/c/Users/Pablo/Documents/GitHub/react_tutorial/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/c/Users/Pablo/Documents/GitHub/react_tutorial/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"/mnt/c/Users/Pablo/Documents/GitHub/react_tutorial/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import ReactDOM from'react-dom';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function calculateGameResult(squares){var lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(var i=0;i<lines.length;i++){var _lines$i=_slicedToArray(lines[i],3),a=_lines$i[0],b=_lines$i[1],c=_lines$i[2];if(squares[a]&&squares[a]===squares[b]&&squares[a]===squares[c]){return squares[a];}}if(squares.every(function(x){return x;}))return'draw';return null;}function calculateWinningLine(squares){var lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(var _i=0,_lines=lines;_i<_lines.length;_i++){var line=_lines[_i];var _line=_slicedToArray(line,3),a=_line[0],b=_line[1],c=_line[2];if(squares[a]&&squares[a]===squares[b]&&squares[a]===squares[c]){return line;}}return null;}function Square(props){return/*#__PURE__*/_jsx(\"button\",{className:\"square\",onClick:props.onClick,style:props.style,children:props.value});}function Board(props){var winningLine=props.winningLine;function renderSquare(i){var winningSquare=winningLine?winningLine.includes(i):false;return/*#__PURE__*/_jsx(Square,{value:props.squares[i],onClick:function onClick(){return props.onClick(i);},style:{backgroundColor:winningSquare?'#ccc':'white'}});}var squareRenderings=Array.from(Array(9),function(x,i){return renderSquare(i);});var boardRows=Array.from(Array(3),function(x,i){return/*#__PURE__*/_jsx(\"div\",{className:\"board-row\",children:squareRenderings.slice(3*i,3*i+3)});});return/*#__PURE__*/_jsx(\"div\",{children:boardRows});}function PlayersMove(props){var boardDifferencePoint=function boardDifferencePoint(board1,board2){for(var i=0;i<board1.length;++i){if(board1[i]!==board2[i])return i;}return null;};function squareCoordinates(squareIndex){return{x:squareIndex%3+1,y:Math.floor(squareIndex/3)+1};}if(props.hist.length>props.move+1){var boardEnd=props.hist[props.move+1].squares;// board at the end of move\nvar boardBeginning=props.step.squares;// board at the beginning of move\nvar squareIndex=boardDifferencePoint(boardEnd,boardBeginning);var selectedSquare=squareCoordinates(squareIndex);var selectedSquareString=JSON.stringify(selectedSquare).replace(/\"/g,'');return/*#__PURE__*/_jsxs(\"p\",{children:[player(props.move),\" picks \",\" \",\" \",selectedSquareString]});}else{return null;}}var player=function player(move){return!(move%2)?'X':'O';};function TimeTravelButton(props){var timeTravelDesc=props.move?'Go to move #'+props.move:'Go to game start';var fontWeight=props.move===props.stepNumber?\"bold\":\"normal\";function jumpTo(move){props.setState({stepNumber:move});}return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return jumpTo(props.move);},style:{fontWeight:fontWeight},children:timeTravelDesc});}function HistoryOrderSwitchButton(props){return/*#__PURE__*/_jsxs(\"label\",{class:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:function onClick(){return props.onClick();}}),/*#__PURE__*/_jsx(\"span\",{class:\"slider\"})]});}var Game=/*#__PURE__*/function(_React$Component){_inherits(Game,_React$Component);var _super=_createSuper(Game);function Game(props){var _this;_classCallCheck(this,Game);_this=_super.call(this,props);_this.state={history:[{squares:Array(9).fill(null)}],stepNumber:0,historyOrderAscending:true};return _this;}_createClass(Game,[{key:\"setStepNumber\",value:function setStepNumber(newStep){this.setState({stepNumber:newStep});}},{key:\"changeHistoryOrder\",value:function changeHistoryOrder(){var currentValue=this.state.historyOrderAscending;this.setState({historyOrderAscending:!currentValue});}},{key:\"handleClick\",value:function handleClick(i){var state=this.state;var history=state.history.slice(0,state.stepNumber+1);var current=history[history.length-1];var squares=current.squares.slice();if(calculateGameResult(squares)||squares[i])return;squares[i]=player(state.stepNumber);this.setState({history:history.concat([{squares:squares}]),stepNumber:history.length});}},{key:\"render\",value:function render(){var _this2=this;var history=this.state.history;var current=history[this.state.stepNumber];var gameResult=calculateGameResult(current.squares);var status={'X':'Winner: X','O':'Winner: O','draw':'The game ended in a draw',null:'Next player: '+player(this.state.stepNumber)}[gameResult];var winningLine=gameResult==='X'||gameResult==='O'?calculateWinningLine(current.squares):null;var moves=history.map(function(step,move,hist){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(TimeTravelButton,{move:move,stepNumber:_this2.state.stepNumber,setState:function setState(obj){return _this2.setState(obj);}}),/*#__PURE__*/_jsx(PlayersMove,{step:step,move:move,hist:hist})]},move);});var reversedMoves=moves.map(function(x){return x;}).reverse();var renderedMoves=this.state.historyOrderAscending?moves:reversedMoves;return/*#__PURE__*/_jsxs(\"div\",{className:\"game\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(HistoryOrderSwitchButton,{onClick:function onClick(){return _this2.changeHistoryOrder();}})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Tic-tac-toe\"}),/*#__PURE__*/_jsx(\"div\",{className:\"game-board\",children:/*#__PURE__*/_jsx(Board,{squares:current.squares,winningLine:winningLine,onClick:function onClick(i){return _this2.handleClick(i);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-info\",children:[/*#__PURE__*/_jsx(\"div\",{children:status}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:renderedMoves})})]})]});}}]);return Game;}(React.Component);// ========================================\nReactDOM.render(/*#__PURE__*/_jsx(Game,{}),document.getElementById('root'));","map":{"version":3,"sources":["/mnt/c/Users/Pablo/Documents/GitHub/react_tutorial/my-app/src/index.js"],"names":["React","ReactDOM","calculateGameResult","squares","lines","i","length","a","b","c","every","x","calculateWinningLine","line","Square","props","onClick","style","value","Board","winningLine","renderSquare","winningSquare","includes","backgroundColor","squareRenderings","Array","from","boardRows","slice","PlayersMove","boardDifferencePoint","board1","board2","squareCoordinates","squareIndex","y","Math","floor","hist","move","boardEnd","boardBeginning","step","selectedSquare","selectedSquareString","JSON","stringify","replace","player","TimeTravelButton","timeTravelDesc","fontWeight","stepNumber","jumpTo","setState","HistoryOrderSwitchButton","Game","state","history","fill","historyOrderAscending","newStep","currentValue","current","concat","gameResult","status","null","moves","map","obj","reversedMoves","reverse","renderedMoves","changeHistoryOrder","handleClick","Component","render","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css';\r\n\r\nfunction calculateGameResult(squares) {\r\n  const lines = [\r\n    [0, 1, 2],\r\n    [3, 4, 5],\r\n    [6, 7, 8],\r\n    [0, 3, 6],\r\n    [1, 4, 7],\r\n    [2, 5, 8],\r\n    [0, 4, 8],\r\n    [2, 4, 6],\r\n  ];\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const [a, b, c] = lines[i];\r\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n      return squares[a];\r\n    }\r\n  }\r\n\r\n  if (squares.every(x => x)) return 'draw';\r\n\r\n  return null;\r\n}\r\n\r\nfunction calculateWinningLine(squares) {\r\n  const lines = [\r\n    [0, 1, 2],\r\n    [3, 4, 5],\r\n    [6, 7, 8],\r\n    [0, 3, 6],\r\n    [1, 4, 7],\r\n    [2, 5, 8],\r\n    [0, 4, 8],\r\n    [2, 4, 6],\r\n  ];\r\n  for (let line of lines) {\r\n    const [a, b, c] = line;\r\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n      return line;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n\r\nfunction Square(props) {\r\n  return (\r\n    <button className=\"square\" onClick={props.onClick} style={props.style}>\r\n      {props.value}\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction Board(props) {\r\n  const winningLine = props.winningLine;\r\n  function renderSquare(i) {\r\n    const winningSquare = (winningLine) ? winningLine.includes(i) : false;\r\n    return (\r\n      <Square\r\n        value={props.squares[i]}\r\n        onClick={() => props.onClick(i)}\r\n        style={{ backgroundColor: (winningSquare) ? '#ccc' : 'white' }}\r\n      />\r\n    );\r\n  }\r\n\r\n  const squareRenderings = Array.from(Array(9), (x, i) => renderSquare(i));\r\n  const boardRows = Array.from(Array(3), (x, i) => \r\n    <div className=\"board-row\">\r\n      {squareRenderings.slice(3*i, 3*i + 3)}\r\n    </div>\r\n  );\r\n\r\n  return <div>{boardRows}</div>;\r\n}\r\n\r\nfunction PlayersMove(props) {\r\n  const boardDifferencePoint = (board1, board2) => {\r\n    for (let i = 0; i < board1.length; ++i)\r\n      if (board1[i] !== board2[i]) return i;\r\n\r\n    return null;\r\n  }\r\n\r\n  function squareCoordinates(squareIndex) {\r\n    return {\r\n      x: squareIndex % 3 + 1,\r\n      y: Math.floor(squareIndex / 3) + 1,\r\n    };\r\n  }\r\n\r\n  if (props.hist.length > props.move + 1) {\r\n    const boardEnd = props.hist[props.move + 1].squares;  // board at the end of move\r\n    const boardBeginning = props.step.squares;  // board at the beginning of move\r\n    const squareIndex = boardDifferencePoint(boardEnd, boardBeginning);\r\n    const selectedSquare = squareCoordinates(squareIndex);\r\n    const selectedSquareString = JSON.stringify(selectedSquare)\r\n      .replace(/\"/g, '');\r\n\r\n    return (\r\n      <p>\r\n        {player(props.move)} picks {\" \"} {selectedSquareString}\r\n      </p>\r\n    );\r\n  }\r\n  else {\r\n    return (null);\r\n  }\r\n}\r\n\r\nconst player = move => !(move % 2) ? 'X' : 'O';\r\n\r\nfunction TimeTravelButton(props) {\r\n  const timeTravelDesc = props.move ?\r\n    'Go to move #' + props.move :\r\n    'Go to game start';\r\n  const fontWeight = props.move === props.stepNumber ? \"bold\" : \"normal\";\r\n\r\n  function jumpTo(move) {\r\n    props.setState({\r\n      stepNumber: move,\r\n    });\r\n  }  \r\n\r\n  return (\r\n    <button\r\n      onClick={() => jumpTo(props.move)}\r\n      style={{fontWeight: fontWeight}}\r\n    >\r\n      {timeTravelDesc}\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction HistoryOrderSwitchButton(props) {\r\n  return <label class=\"switch\">\r\n    <input type=\"checkbox\" onClick={() => props.onClick()} />\r\n    <span class=\"slider\" />\r\n  </label>;\r\n}\r\n\r\nclass Game extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      history: [{ squares: Array(9).fill(null) }],\r\n      stepNumber: 0,\r\n      historyOrderAscending: true,\r\n    }\r\n  }\r\n\r\n  setStepNumber(newStep) {\r\n    this.setState({ stepNumber: newStep });\r\n  }\r\n\r\n  changeHistoryOrder() {\r\n    const currentValue = this.state.historyOrderAscending;\r\n    this.setState({ historyOrderAscending: !currentValue });\r\n  }\r\n\r\n  handleClick(i) {\r\n    const state = this.state;\r\n    const history = state.history.slice(0, state.stepNumber + 1);\r\n    const current = history[history.length - 1];\r\n    const squares = current.squares.slice();\r\n    if (calculateGameResult(squares) || squares[i]) return;\r\n\r\n    squares[i] = player(state.stepNumber);\r\n\r\n    this.setState({\r\n      history: history.concat([{squares}]),\r\n      stepNumber: history.length,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const history = this.state.history;\r\n    const current = history[this.state.stepNumber];\r\n    const gameResult = calculateGameResult(current.squares);\r\n    const status = {\r\n      'X': 'Winner: X',\r\n      'O': 'Winner: O',\r\n      'draw': 'The game ended in a draw',\r\n      null: 'Next player: ' + player(this.state.stepNumber),\r\n    }[gameResult];\r\n\r\n    const winningLine = (gameResult === 'X' || gameResult === 'O') ?\r\n      calculateWinningLine(current.squares): null;\r\n\r\n    const moves = history.map((step, move, hist) => {\r\n      return (\r\n        <li key={move}>\r\n          <TimeTravelButton\r\n            move={move}\r\n            stepNumber={this.state.stepNumber}\r\n            setState={obj => this.setState(obj)}\r\n          />\r\n          <PlayersMove step={step} move={move} hist={hist} /> \r\n        </li>\r\n      );\r\n    })\r\n\r\n    const reversedMoves = moves.map(x => x).reverse()\r\n    const renderedMoves = (this.state.historyOrderAscending) ?\r\n      moves :\r\n      reversedMoves;\r\n\r\n    return (\r\n      <div className=\"game\">\r\n        <header>\r\n          <HistoryOrderSwitchButton\r\n            onClick={() => this.changeHistoryOrder()}\r\n          />\r\n        </header>\r\n        <h1>Tic-tac-toe</h1>\r\n        <div className=\"game-board\">\r\n          <Board\r\n            squares={current.squares}\r\n            winningLine={winningLine}\r\n            onClick={(i) => this.handleClick(i)}\r\n          />\r\n        </div>\r\n        <div className=\"game-info\">\r\n          <div>{status}</div>\r\n          <div>\r\n            <ul>{renderedMoves}</ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// ========================================\r\n\r\nReactDOM.render(\r\n  <Game />,\r\n  document.getElementById('root')\r\n);\r\n"]},"metadata":{},"sourceType":"module"}